<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="t_store_dispatching_range" >
   <resultMap id="ibatorgenerated_BaseResultMap" class="com.rc.portal.vo.TStoreDispatchingRange" >
    <result column="id" property="id" jdbcType="BIGINT" />
    <result column="lat_lon_range" property="latLonRange" jdbcType="VARCHAR" />
    <result column="store_lat_lon" property="storeLatLon" jdbcType="VARCHAR" />
    <result column="store_hd_id" property="storeHdId" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="create_dt" property="createDt" jdbcType="TIMESTAMP" />
    <result column="sort" property="sort" jdbcType="INTEGER" />
    <result column="start_dt" property="startDt" jdbcType="TIMESTAMP" />
    <result column="end_dt" property="endDt" jdbcType="TIMESTAMP" />
    <result column="area_city_id" property="areaCityId" jdbcType="BIGINT" />
  </resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause" >
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.rc.portal.vo.TStoreDispatchingRangeExample" >
    select id, lat_lon_range, store_lat_lon, store_hd_id, name, address, create_dt, sort, start_dt,
      end_dt, area_city_id
    from t_store_dispatching_range
    <isParameterPresent >
      <include refid="t_store_dispatching_range.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.rc.portal.vo.TStoreDispatchingRange" >
    select id, lat_lon_range, store_lat_lon, store_hd_id, name, address, create_dt, sort, start_dt,
      end_dt, area_city_id
    from t_store_dispatching_range
    where id = #id:BIGINT#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.rc.portal.vo.TStoreDispatchingRange" >
    delete from t_store_dispatching_range
    where id = #id:BIGINT#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.rc.portal.vo.TStoreDispatchingRangeExample" >
    delete from t_store_dispatching_range
    <include refid="t_store_dispatching_range.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.rc.portal.vo.TStoreDispatchingRange" >
    insert into t_store_dispatching_range (id, lat_lon_range, store_lat_lon, store_hd_id, name,
      address, create_dt, sort, start_dt, end_dt, area_city_id)
    values (#id:BIGINT#, #latLonRange:VARCHAR#, #storeLatLon:VARCHAR#, #storeHdId:VARCHAR#,
      #name:VARCHAR#, #address:VARCHAR#, #createDt:TIMESTAMP#, #sort:INTEGER#, #startDt:TIMESTAMP#,
      #endDt:TIMESTAMP#, #areaCityId:BIGINT#)
	<selectKey resultClass="long" keyProperty="id"> 
		select LAST_INSERT_ID()
	</selectKey>
  </insert>

  <insert id="ibatorgenerated_insertSelective" parameterClass="com.rc.portal.vo.TStoreDispatchingRange" >
    insert into t_store_dispatching_range
    <dynamic prepend="(" >
      <isNotNull prepend="," property="id" >
        id
      </isNotNull>
      <isNotNull prepend="," property="latLonRange" >
        lat_lon_range
      </isNotNull>
      <isNotNull prepend="," property="storeLatLon" >
        store_lat_lon
      </isNotNull>
      <isNotNull prepend="," property="storeHdId" >
        store_hd_id
      </isNotNull>
      <isNotNull prepend="," property="name" >
        name
      </isNotNull>
      <isNotNull prepend="," property="address" >
        address
      </isNotNull>
      <isNotNull prepend="," property="createDt" >
        create_dt
      </isNotNull>
      <isNotNull prepend="," property="sort" >
        sort
      </isNotNull>
      <isNotNull prepend="," property="startDt" >
        start_dt
      </isNotNull>
      <isNotNull prepend="," property="endDt" >
        end_dt
      </isNotNull>
      <isNotNull prepend="," property="areaCityId" >
        area_city_id
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="id" >
        #id:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="latLonRange" >
        #latLonRange:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="storeLatLon" >
        #storeLatLon:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="storeHdId" >
        #storeHdId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="address" >
        #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDt" >
        #createDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="sort" >
        #sort:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="startDt" >
        #startDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="endDt" >
        #endDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="areaCityId" >
        #areaCityId:BIGINT#
      </isNotNull>
      )
    </dynamic>
	<selectKey resultClass="long" keyProperty="id"> 
		select LAST_INSERT_ID()
	</selectKey>
  </insert>

  <select id="ibatorgenerated_countByExample" parameterClass="com.rc.portal.vo.TStoreDispatchingRangeExample" resultClass="java.lang.Integer" >
    select count(*) from t_store_dispatching_range
    <include refid="t_store_dispatching_range.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective" >
    update t_store_dispatching_range
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.id" >
        id = #record.id:BIGINT#
      </isNotNull>
      <isNotNull prepend="," property="record.latLonRange" >
        lat_lon_range = #record.latLonRange:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.storeLatLon" >
        store_lat_lon = #record.storeLatLon:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.storeHdId" >
        store_hd_id = #record.storeHdId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.name" >
        name = #record.name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.address" >
        address = #record.address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.createDt" >
        create_dt = #record.createDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.sort" >
        sort = #record.sort:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.startDt" >
        start_dt = #record.startDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.endDt" >
        end_dt = #record.endDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.areaCityId" >
        area_city_id = #record.areaCityId:BIGINT#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="t_store_dispatching_range.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample" >
    update t_store_dispatching_range
    set id = #record.id:BIGINT#,
      lat_lon_range = #record.latLonRange:VARCHAR#,
      store_lat_lon = #record.storeLatLon:VARCHAR#,
      store_hd_id = #record.storeHdId:VARCHAR#,
      name = #record.name:VARCHAR#,
      address = #record.address:VARCHAR#,
      create_dt = #record.createDt:TIMESTAMP#,
      sort = #record.sort:INTEGER#,
      start_dt = #record.startDt:TIMESTAMP#,
      end_dt = #record.endDt:TIMESTAMP#,
      area_city_id = #record.areaCityId:BIGINT#
    <isParameterPresent >
      <include refid="t_store_dispatching_range.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.rc.portal.vo.TStoreDispatchingRange" >
    update t_store_dispatching_range
    <dynamic prepend="set" >
      <isNotNull prepend="," property="latLonRange" >
        lat_lon_range = #latLonRange:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="storeLatLon" >
        store_lat_lon = #storeLatLon:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="storeHdId" >
        store_hd_id = #storeHdId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        name = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="address" >
        address = #address:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createDt" >
        create_dt = #createDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="sort" >
        sort = #sort:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="startDt" >
        start_dt = #startDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="endDt" >
        end_dt = #endDt:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="areaCityId" >
        area_city_id = #areaCityId:BIGINT#
      </isNotNull>
    </dynamic>
    where id = #id:BIGINT#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.rc.portal.vo.TStoreDispatchingRange" >
    update t_store_dispatching_range
    set lat_lon_range = #latLonRange:VARCHAR#,
      store_lat_lon = #storeLatLon:VARCHAR#,
      store_hd_id = #storeHdId:VARCHAR#,
      name = #name:VARCHAR#,
      address = #address:VARCHAR#,
      create_dt = #createDt:TIMESTAMP#,
      sort = #sort:INTEGER#,
      start_dt = #startDt:TIMESTAMP#,
      end_dt = #endDt:TIMESTAMP#,
      area_city_id = #areaCityId:BIGINT#
    where id = #id:BIGINT#
  </update>
  <select id="selectByExampleByPage" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.rc.portal.vo.TStoreDispatchingRangeExample" >
                    select id, lat_lon_range, store_lat_lon, store_hd_id, name, address, create_dt, sort, start_dt,
                      end_dt, area_city_id
                    from t_store_dispatching_range
                    <isParameterPresent >
                      <include refid="t_store_dispatching_range.ibatorgenerated_Example_Where_Clause" />
                      <isNotNull property="orderByClause" >
                        order by $orderByClause$
                      </isNotNull>
                    </isParameterPresent>
					limit $pageInfo.start$ ,$pageInfo.pageSize$
  </select>
  
  <select id="selectStoreListByPage" resultClass="java.util.HashMap" parameterClass="java.util.Map">
   select t.id, t.lat_lon_range, t.store_lat_lon, t.store_hd_id, t.name, t.address, t.create_dt, t.sort,t.start_dt,t.end_dt,c.name as city
    from t_store_dispatching_range t
    left join c_location_city c on t.area_city_id=c.id
    where 1=1
    <isNotNull prepend="and" property="storeName">
    	t.name like '%$storeName$%'
    </isNotNull>
    <isNotNull prepend="and" property="storeHd">
    	t.store_hd_id = #storeHd#
    </isNotNull>
    order by t.create_dt desc
     LIMIT $pageInfo.start$,$pageInfo.end$
  </select>

  
    <select id="selectStoreListCount" resultClass="java.lang.Integer" parameterClass="java.util.Map">
  		select count(t.id) from t_store_dispatching_range t
  		 where 1=1
	    <isNotNull prepend="and" property="storeName">
	    	t.name like '%$storeName$%'
	    </isNotNull>
	    <isNotNull prepend="and" property="storeHd">
	    	t.store_hd_id = #storeHd#
	    </isNotNull>
  </select>
  
    <select id="selectStoreListByCityCode" resultClass="java.util.HashMap" parameterClass="java.util.Map">
	SELECT t.id,t.`name` AS storeName,t.lat_lon_range,t.store_lat_lon FROM t_store_dispatching_range t
	left JOIN c_location_city c ON t.area_city_id=c.id
    where 1=1
    <isNotNull prepend="and" property="cityCode">
    	c.citycode = #cityCode#
    </isNotNull>
  </select>
</sqlMap>
